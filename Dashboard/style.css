:root {
  --bg: #f6f7fb;
  --panel: #ffffff;
  --text: #121826;
  --muted: #5f6b7a;
  --border: rgba(18, 24, 38, 0.12);

  --link: rgba(18, 24, 38, 0.35);
  --linkStrong: rgba(18, 24, 38, 0.8);

  --accent: #e11d48;   /* selection */
  --accent2: #f59e0b;  /* downstream */
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background: var(--bg);
  color: var(--text);
}

header {
  padding: 16px 18px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(#ffffff, #fafbff);
}

h1 { margin: 0 0 8px 0; font-size: 18px; }
.hint { color: var(--muted); font-size: 13px; line-height: 1.4; }

main {
  display: grid;
  grid-template-columns: 1fr 360px;
  gap: 12px;
  padding: 12px;
  height: calc(100vh - 74px);
}

#left {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 16px;
  overflow: hidden;
  position: relative;
}

#graph { width: 100%; height: 100%; display: block; }

#right {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 14px;
  overflow: auto;
}

#right h2 { margin: 0 0 10px 0; font-size: 16px; }

#panel {
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
  background: #fbfcff;
}

.muted { color: var(--muted); }

.buttons { margin-top: 12px; display: flex; gap: 8px; }

button {
  border: 1px solid var(--border);
  background: #f3f5fb;
  color: var(--text);
  padding: 10px 12px;
  border-radius: 12px;
  cursor: pointer;
}
button:hover { background: #e9eefc; }

/* ---- Graph ---- */

.link {
  stroke: var(--link);
  stroke-width: 2.2;
  fill: none;
  cursor: pointer;
  /* important: make thin lines clickable */
  pointer-events: stroke;
}

.link.selected { stroke: var(--accent); stroke-width: 3.4; }
.link.downstream { stroke: var(--accent2); stroke-width: 3.0; }
.link.dimmed { opacity: 0.55; }

.node circle {
  stroke: rgba(18,24,38,0.35);
  stroke-width: 1.2;
  cursor: pointer;
  transition: r 200ms ease, opacity 160ms ease;
}

.node text {
  fill: rgba(18,24,38,0.90);
  font-size: 12px;
  pointer-events: none;
}

.node.selected circle { stroke: var(--accent); stroke-width: 2.6; }
.node.downstream circle { stroke: var(--accent2); stroke-width: 2.2; }
.node.dimmed { opacity: 0.7; }

/* Edge +/- labels */
.link-label {
  font-size: 12px;
  font-weight: 700;
  fill: rgba(18,24,38,0.75);
  pointer-events: none;
  paint-order: stroke;
  stroke: rgba(255,255,255,0.9);
  stroke-width: 3px;
}

/* Formula formatting */
.kv { margin: 0 0 10px 0; }
.k { color: var(--muted); font-size: 12px; margin-bottom: 4px; }
.v { font-size: 13px; line-height: 1.35; white-space: pre-wrap; }

code {
  display: block;
  padding: 10px;
  border-radius: 10px;
  background: #f2f4fb;
  border: 1px solid var(--border);
  color: rgba(18,24,38,0.95);
  overflow-x: auto;
}

